var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{A:()=>r});class s{constructor(e,t){this._defaultOptions=e,this._options=t,this._eventListeners=new Map}get options(){return{...this._defaultOptions,...this._options}}_isNodeList(e){return NodeList.prototype.isPrototypeOf(e)}_attachEvent(e,t,s){this._eventListeners.has(e)?this._eventListeners.get(e).push({[t]:s}):this._eventListeners.set(e,[{[t]:s}]),e.addEventListener(t,s)}_detachEvent(e,t,s,i){e.removeEventListener(t,s),this._eventListeners.get(e).splice(i,1)}_detachEvents(e,t){this._eventListeners.get(e).forEach(((s,i)=>{if(""===t)this._detachEvent(e,Object.keys(s)[0],Object.values(s)[0],i);else{const n=s[t];"function"==typeof n&&this._detachEvent(e,t,n,i)}})),0===this._eventListeners.get(e).length&&this._eventListeners.delete(e)}emitEvent(e="",t={},s=this.options.el){const i=new CustomEvent(e,{detail:t});s.dispatchEvent(i)}on(e,t,s){this._isNodeList(e)?e.forEach((e=>{this._attachEvent(e,t,s)})):this._attachEvent(e,t,s)}off(e,t=""){this._isNodeList(e)?e.forEach((e=>{this._detachEvents(e,t)})):this._detachEvents(e,t)}offAll(){this._eventListeners.forEach(((e,t)=>{this._detachEvents(t,"")}))}}class i{constructor(e=document.querySelector("html"),t="after"){this._el=e,this._pseudoElement=t,this._breakpoints=this._getBreakpoints()}_getContentValue(){return window.getComputedStyle(this._el,`::${this._pseudoElement}`).getPropertyValue("content").replace(/['"]/g,"")}_getBreakpoints(){const e=this._getContentValue(),t={};return e.split(",").forEach((e=>{const s=e.split(":");t[s[0]]=s[1]})),t}get breakpoints(){return this._breakpoints}}class n{static siblings(e){return[...e.parentElement.children].filter((t=>t!==e))}}class o{static throttle(e,t=250,s=this,...i){let n,o;return()=>{o?(clearTimeout(n),n=setTimeout((()=>{Date.now()-o>=t&&(e.apply(s,i),o=Date.now())}),t-(Date.now()-o))):(e.apply(s,i),o=Date.now())}}static debounce(e,t=250,s=this,...i){let n;return()=>{clearTimeout(n),n=setTimeout((()=>{n=null,e.apply(s,i)}),t)}}}class l{#e=!1;#t;#s;#i;#n;constructor(e,t,s){this.#t=e,this.#i=t,this.#n=s,this.#s=this.#t.el.querySelectorAll(".level-wrapper:is(nav > .level-wrapper) > ul > li > .level-wrapper"),this.#n.addListener((()=>{this.#n.matches?this.#o("0px"):this.stop()})),window.addEventListener("resize",o.throttle(this.equalize.bind(this)))}start(){this.#e=!0}stop(){this.#e=!1,this.#n.matches?this.#o("0px"):this.#o()}equalize(){if(!1===this.#e)return;const e=this.#l();this.#s.forEach((t=>{window.setTimeout((()=>{t.style.height=`${e}px`}),0)}))}#l(){const e=this.#t.el.querySelectorAll(`.${this.#t.classes.subLevelOpen} > ul`),t=[],s=this.#s[0].getBoundingClientRect().height;return this.#o(),e.forEach((e=>{t.push(e.getBoundingClientRect().height)})),this.#s.forEach((e=>{e.style.height=`${s}px`})),Math.max(...t)}#o(e="auto"){this.#s.forEach((t=>{t.style.height=e}))}}class r extends s{#r;#i;#n;#h;#a;constructor(e){super({el:document.querySelector("[data-mega-menu]"),menuToggle:document.querySelector("[data-mega-menu-toggle]"),breakpoint:"large",openActiveSubLevel:!0,classes:{levelWrapper:"level-wrapper",subLevelOpen:"open",activeItems:"is-active"}},e),this.#r=this.options.el.querySelectorAll("li:has(ul) > button"),this.#i=new i,this.#n=window.matchMedia(`(min-width: ${this.#i.breakpoints[this.options.breakpoint]})`),this.#h=new l(this.options,this.#i,this.#n),this.#a=this.options.el.querySelectorAll(`.${this.options.classes.activeItems}`)}init(){let e=!1;const t=this.options.el.querySelector(".level-wrapper");this.options.menuToggle.addEventListener("click",(()=>{this.#c(this.options.el.querySelector(`.${this.options.classes.levelWrapper}`))})),this.#r.forEach((t=>{t.addEventListener("click",(({target:s})=>{this.#p(s),this.#c(s.closest("button").nextElementSibling),1===this.#u(t,".level-wrapper").length&&!1===e&&(this.#v(),e=!0)}))})),this.options.el.querySelectorAll("[data-back]").forEach((e=>{e.addEventListener("click",this.#d)})),this.options.el.querySelectorAll("[data-close]").forEach((e=>{e.addEventListener("click",(()=>{this.#b()}))})),this.#n.matches&&this.#g(t,!1),this.#n.addListener((()=>{this.#b(),this.#n.matches?this.#g(t,!1):this.#g(t,!0)})),this.options.openActiveSubLevel&&this.#L(),document.addEventListener("keydown",(e=>{if("Escape"===e.key){const e=this.options.el.querySelector(`.${this.options.classes.subLevelOpen}`);if(null===e)return;this.#E(e)}}))}#d=({target:e})=>{const t=e.closest(`.${this.options.classes.subLevelOpen}`);this.#E(t)};#c(e){e.classList.contains(this.options.classes.subLevelOpen)?this.#E(e):this.#m(e),this.#h.equalize(e)}#m(e){const t=this.#u(e,".level-wrapper").length,s=e.previousElementSibling;1===t&&this.#n.matches&&this.#h.start(),e.classList.add(this.options.classes.subLevelOpen),this.#g(e,!1),null!==s&&(s.ariaExpanded="true"),0===t&&(this.options.menuToggle.ariaExpanded="true")}#E(e){const t=this.#u(e,".level-wrapper").length,s=e.previousElementSibling;e.classList.remove(this.options.classes.subLevelOpen),this.#g(e,!0),null!==s&&(s.ariaExpanded="false"),0===t&&(this.options.menuToggle.ariaExpanded="false"),1===t&&this.#h.stop()}#b(e=this.options.el){e.querySelectorAll(`.${this.options.classes.subLevelOpen}`).forEach((e=>{this.#E(e)}))}#p(e){const t=e.closest("li");n.siblings(t).forEach((e=>{this.#b(e)}))}#u(e,t){const s=[];for(;(e=e.parentElement)&&e!==document;)t&&!e.matches(t)||s.push(e);return s}#L(){this.#a.forEach(((e,t)=>{const s=e.querySelector(`.${this.options.classes.levelWrapper}`);this.#n.matches&&0===t||null!==s&&this.#m(s)}))}#v(){document.addEventListener("click",(e=>{this.#n.matches&&!this.options.el.contains(e.target)&&null!==this.options.el.querySelector(`.${this.options.classes.subLevelOpen}`)&&this.#E(this.options.el.querySelector(`.${this.options.classes.subLevelOpen}`))}))}#g(e,t){e.inert=t}}var h=t.A;export{h as MegaMenu};